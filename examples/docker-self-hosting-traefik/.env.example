# Floww Self-Hosting Configuration
# Copy this file to .env and configure for your environment

# ============================================================================
# OIDC AUTHENTICATION CONFIGURATION
# ============================================================================
# Floww uses OpenID Connect (OIDC) for authentication, which works with any
# OIDC-compliant provider: WorkOS, Auth0, Keycloak, Authentik, etc.

# Client ID from your OIDC provider
AUTH_CLIENT_ID=your-client-id

# Client Secret from your OIDC provider
AUTH_CLIENT_SECRET=your-client-secret

# OIDC Issuer URL (must include protocol, no trailing slash)
# The system will use OIDC Discovery to find all necessary endpoints
# Examples:
#   WorkOS: https://api.workos.com
#   Auth0: https://yourdomain.auth0.com
#   Keycloak: https://keycloak.example.com/realms/myrealm
#   Authentik: https://authentik.example.com/application/o/floww
AUTH_ISSUER_URL=https://your-oidc-provider.com

# JWT Algorithm (RS256 is standard for most OIDC providers)
JWT_ALGORITHM=RS256

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# PostgreSQL connection URL
# Format: postgresql+asyncpg://user:password@host:port/database
DATABASE_URL=postgresql+asyncpg://admin:secret@floww-db:5432/postgis

# Session secret key (generate with: python -c "import secrets; print(secrets.token_urlsafe(32))")
SESSION_SECRET_KEY=change-this-to-a-random-secret-key

# Encryption key for secrets (generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())")
ENCRYPTION_KEY=OTLHgX6E8_3k-c6rHBsbHDKnuPGtmD1ycNip9CgfiFk=

# ============================================================================
# CENTRIFUGO CONFIGURATION
# ============================================================================
# Centrifugo WebSocket server configuration
CENTRIFUGO_HOST=floww-centrifugo
CENTRIFUGO_PORT=8000
CENTRIFUGO_API_KEY=floww-api-key-dev
CENTRIFUGO_JWT_SECRET=floww-dev-jwt-secret-key-change-in-production

# ============================================================================
# RUNTIME CONFIGURATION
# ============================================================================
# Runtime type: "docker", "lambda", or "kubernetes"
RUNTIME_TYPE=docker

# Public API URL (used for OAuth redirects)
# For local development: http://localhost or https://api.localhost
# For production: https://api.yourdomain.com
PUBLIC_API_URL=https://api.localhost

# ============================================================================
# DOCKER REGISTRY (optional, for custom trigger images)
# ============================================================================
DOCKER_REGISTRY_URL=
DOCKER_REGISTRY_USER=
DOCKER_REGISTRY_PASSWORD=
